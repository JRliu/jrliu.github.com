webpackJsonp([1,5],{15:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(2),a=n(i),r=o(1);o(5),o(6),o(38),t["default"]={components:{MtButton:r.Button},data:function(){return{id:this.$route.params.id,data:{author:{},content:""},myReply:"",myReReply:"",showReplyId:0,showReplyName:""}},computed:{isCollect:function(){return this.data.is_collect?"default":"primary"},collectBtn:function(){return this.data.is_collect?"取消收藏":"收藏"}},vuex:{getters:{accessToken:function(e){return e.accessToken},loginStatus:function(e){return e.loginStatus},userId:function(e){var t=e.userData;return t.id}}},methods:{getData:function(){var e=this;this.$http({url:"https://cnodejs.org/api/v1/topic/"+this.$route.params.id,method:"GET",params:{accesstoken:this.accessToken}}).then(function(t){var o=t.body.data;a["default"].set(e,"data",o)})},collectToggle:function(){var e=this,t=function(t,o,n){e.$http({url:"https://cnodejs.org/api/v1/topic_collect/"+t,method:"POST",body:{accesstoken:e.accessToken,topic_id:e.data.id}}).then(function(t){a["default"].set(e.data,"is_collect",o),n()})["catch"](function(e){console.warn(e)})};if(this.data.is_collect){var o="de_collect",n=!1,i=function(){(0,r.Toast)({message:"取消成功",duration:1e3})};t(o,n,i)}else{var c="collect",s=!0,l=function(){(0,r.Toast)({message:"收藏成功",duration:1e3})};t(c,s,l)}},reply:function(e){var t=this;this.$http({url:"https://cnodejs.org/api/v1/topic/"+this.data.id+"/replies",method:"POST",body:{accesstoken:this.accessToken,content:this.myReply}}).then(function(e){t.getData(),t.myReply=""})["catch"](function(e){console.log(e)})},replyFocus:function(){var e=document.getElementById("replyAuthor");e.scrollIntoView()},ups:function(e,t){var o=this;this.$http({url:"https://cnodejs.org/api/v1/reply/"+e+"/ups",method:"POST",body:{accesstoken:this.accessToken}}).then(function(e){if(console.log(e),"up"==e.body.action)t.push(o.userId);else{var n=t.indexOf(o.userId);t.splice(n,1)}})["catch"](function(e){console.log(e)})},upsText:function(e){var t=this;return e.ups.some(function(e,o,n){return e==t.userId})?"已赞":"点赞"},reReply:function(e){var t=this;this.$http({url:"https://cnodejs.org/api/v1/topic/"+this.data.id+"/replies",method:"POST",body:{accesstoken:this.accessToken,content:this.myReReply,reply_id:e}}).then(function(e){t.getData(),t.showReplyId=0})["catch"](function(e){console.log(e)})},showReply:function(e,t){this.showReplyId===e?(this.showReplyId=0,this.showReplyName=""):(this.showReplyId=e,this.showReplyName=t,this.$nextTick(function(){var e=document.getElementById("reReply");e.focus()}))},iosScrollTo:function(e){var t=navigator.userAgent,o=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=function(){var t=document.body.scrollTop,o=e.target.offsetTop;document.body.scrollTop=t+(o-t)-100};o&&setTimeout(n,500)}},ready:function(){this.getData()}}},28:function(e,t,o){t=e.exports=o(3)(),t.push([e.id,"#content img{max-width:100%}#content a,#content code,#content p{white-space:pre-wrap;word-wrap:break-word}#content code{width:100%;font-size:11px}#content .content h2{font-size:20px;line-height:30px;padding-bottom:15px}","",{version:3,sources:["/./src/css/src/css/content.scss"],names:[],mappings:"AAAA,aAEC,cAAgB,CAFjB,oCAKE,qBACA,oBAAsB,CANxB,cASE,WACA,cAAe,CAVjB,qBAaE,eACA,iBACA,mBAAqB,CACrB",file:"content.scss",sourcesContent:["#content{\r\n\timg{\r\n\tmax-width: 100%;\r\n\t}\r\n\tp,code,a{\r\n\t\twhite-space: pre-wrap;\r\n\t\tword-wrap: break-word;\r\n\t}\r\n\tcode{\r\n\t\twidth: 100%;\r\n\t\tfont-size:11px;\r\n\t}\r\n\t.content h2{\r\n\t\tfont-size: 20px;\r\n\t\tline-height: 30px;\r\n\t\tpadding-bottom: 15px;\r\n\t}\r\n}\r\n"],sourceRoot:"webpack://"}])},29:function(e,t,o){t=e.exports=o(3)(),t.push([e.id,"#content[_v-0686bfcb]{position:absolute;width:100%}.panel[_v-0686bfcb]{margin:5px}.panel .top[_v-0686bfcb]{padding:10px;background-color:#fff}.panel .top .create_at[_v-0686bfcb]{float:left;font-size:.2rem}.panel .top .tab[_v-0686bfcb]{padding:0 .1rem;border-radius:10%;float:left;font-size:.2rem}.panel .top .title[_v-0686bfcb]{font-size:.35rem;text-align:left;font-weight:600;line-height:.6rem}.panel .content[_v-0686bfcb]{background-color:#fff;padding-bottom:10px}.panel .content .author img[_v-0686bfcb]{height:.5rem;display:block;padding:.125rem;border-radius:15%;float:left;cursor:pointer}.panel .content .author span[_v-0686bfcb]{float:left;line-height:.5rem;font-size:.3rem}.panel .content .main-content[_v-0686bfcb]{text-align:justify;font-size:.26rem;line-height:.4rem;padding:10px}.panel .replies_count[_v-0686bfcb]{margin:2px 0;background-color:#fff;height:.5rem;line-height:.5rem;font-size:.26rem;text-align:justify;color:#2e2e2e;font-weight:700}.panel .replies_count[_v-0686bfcb]:before{content:'';height:100%;float:left;width:7px;background-color:#2e2e2e;display:block}.panel .replies .reply[_v-0686bfcb]{margin-bottom:2px}.panel .replies .author[_v-0686bfcb]{background-color:#fff}.panel .replies .author img[_v-0686bfcb]{height:.5rem;display:block;padding:.125rem;border-radius:15%;float:left;cursor:pointer}.panel .replies .author .name[_v-0686bfcb]{float:left;line-height:.5rem;font-size:.25rem}.panel .replies .author .create_at[_v-0686bfcb]{float:right;line-height:.5rem;font-size:.2rem;padding-right:10px}.panel .replies .content[_v-0686bfcb]{text-align:justify;font-size:.26rem;line-height:.4rem;padding:10px;padding-top:0;background-color:#fff;position:relative}.panel .replies .ups[_v-0686bfcb]{background-color:#fff}.panel .replies .ups div[_v-0686bfcb]{float:right;padding-right:10px;color:#26a2ff}.myReply .myReplyText[_v-0686bfcb]{width:100%;resize:none;border-radius:5px;font-size:.28rem;box-sizing:border-box;padding:5px}","",{version:3,sources:["/./src/components/content.vue"],names:[],mappings:"AAAA,sBAAsB,kBAAkB,UAAU,CAAC,oBAAoB,UAAU,CAAC,yBAAyB,aAAa,qBAAqB,CAAC,oCAAoC,WAAW,eAAgB,CAAC,8BAA8B,gBAAgB,kBAAkB,WAAW,eAAgB,CAAC,gCAAgC,iBAAiB,gBAAgB,gBAAgB,iBAAiB,CAAC,6BAA6B,sBAAsB,mBAAmB,CAAC,yCAAyC,aAAc,cAAc,gBAAgB,kBAAkB,WAAW,cAAc,CAAC,0CAA0C,WAAW,kBAAkB,eAAe,CAAC,2CAA2C,mBAAmB,iBAAiB,kBAAkB,YAAY,CAAC,mCAAmC,aAAa,sBAAsB,aAAa,kBAAkB,iBAAiB,mBAAmB,cAAc,eAAe,CAAC,0CAA0C,WAAW,YAAY,WAAW,UAAU,yBAAyB,aAAa,CAAC,oCAAoC,iBAAiB,CAAC,qCAAqC,qBAAqB,CAAC,yCAAyC,aAAc,cAAc,gBAAgB,kBAAkB,WAAW,cAAc,CAAC,2CAA2C,WAAW,kBAAkB,gBAAgB,CAAC,gDAAgD,YAAY,kBAAkB,gBAAgB,kBAAkB,CAAC,sCAAsC,mBAAmB,iBAAiB,kBAAkB,aAAa,cAAc,sBAAsB,iBAAiB,CAAC,kCAAkC,qBAAqB,CAAC,sCAAsC,YAAY,mBAAmB,aAAa,CAAC,mCAAmC,WAAW,YAAY,kBAAkB,iBAAiB,sBAAsB,WAAW,CAAC",file:"content.vue",sourcesContent:["#content[_v-0686bfcb]{position:absolute;width:100%}.panel[_v-0686bfcb]{margin:5px}.panel .top[_v-0686bfcb]{padding:10px;background-color:#fff}.panel .top .create_at[_v-0686bfcb]{float:left;font-size:0.2rem}.panel .top .tab[_v-0686bfcb]{padding:0 .1rem;border-radius:10%;float:left;font-size:0.2rem}.panel .top .title[_v-0686bfcb]{font-size:.35rem;text-align:left;font-weight:600;line-height:.6rem}.panel .content[_v-0686bfcb]{background-color:#fff;padding-bottom:10px}.panel .content .author img[_v-0686bfcb]{height:0.5rem;display:block;padding:.125rem;border-radius:15%;float:left;cursor:pointer}.panel .content .author span[_v-0686bfcb]{float:left;line-height:.5rem;font-size:.3rem}.panel .content .main-content[_v-0686bfcb]{text-align:justify;font-size:.26rem;line-height:.4rem;padding:10px}.panel .replies_count[_v-0686bfcb]{margin:2px 0;background-color:#fff;height:.5rem;line-height:.5rem;font-size:.26rem;text-align:justify;color:#2e2e2e;font-weight:700}.panel .replies_count[_v-0686bfcb]:before{content:'';height:100%;float:left;width:7px;background-color:#2e2e2e;display:block}.panel .replies .reply[_v-0686bfcb]{margin-bottom:2px}.panel .replies .author[_v-0686bfcb]{background-color:#fff}.panel .replies .author img[_v-0686bfcb]{height:0.5rem;display:block;padding:.125rem;border-radius:15%;float:left;cursor:pointer}.panel .replies .author .name[_v-0686bfcb]{float:left;line-height:.5rem;font-size:.25rem}.panel .replies .author .create_at[_v-0686bfcb]{float:right;line-height:.5rem;font-size:.2rem;padding-right:10px}.panel .replies .content[_v-0686bfcb]{text-align:justify;font-size:.26rem;line-height:.4rem;padding:10px;padding-top:0;background-color:#fff;position:relative}.panel .replies .ups[_v-0686bfcb]{background-color:#fff}.panel .replies .ups div[_v-0686bfcb]{float:right;padding-right:10px;color:#26a2ff}.myReply .myReplyText[_v-0686bfcb]{width:100%;resize:none;border-radius:5px;font-size:.28rem;box-sizing:border-box;padding:5px}\n"],sourceRoot:"webpack://"}])},38:function(e,t,o){var n=o(28);"string"==typeof n&&(n=[[e.id,n,""]]);o(4)(n,{});n.locals&&(e.exports=n.locals)},41:function(e,t,o){var n=o(29);"string"==typeof n&&(n=[[e.id,n,""]]);o(4)(n,{});n.locals&&(e.exports=n.locals)},54:function(e,t){e.exports=' <div id=content _v-0686bfcb=""> <div class=panel _v-0686bfcb=""> <div class="top clear" _v-0686bfcb=""> <div class=title _v-0686bfcb=""> <p _v-0686bfcb="">{{data.title}}</p> </div> <div class=create_at _v-0686bfcb="">•发表于 {{data.create_at|last_reply_at}}</div> <div class=tab _v-0686bfcb="">•来自 {{data|tabName}}</div> <mt-button :type=isCollect size=small style=float:right v-if=loginStatus @click=collectToggle _v-0686bfcb=""> {{collectBtn}} </mt-button> </div> <div class="content clear" _v-0686bfcb=""> <div class="author clear" v-link="{name:\'user\',params:{username:data.author.loginname}}" _v-0686bfcb=""> <img :src=data.author.avatar_url _v-0686bfcb=""> <span _v-0686bfcb="">{{data.author.loginname}}</span> </div> <div class=main-content v-html=data.content _v-0686bfcb=""> </div> <mt-button :type=isCollect size=small v-if=loginStatus @click=replyFocus _v-0686bfcb=""> 回复 </mt-button> </div> <div class=replies_count _v-0686bfcb=""> <div class=count _v-0686bfcb="">共{{data.reply_count}}条回复</div> </div> <div class=replies _v-0686bfcb=""> <div class=reply v-for="re in data.replies" _v-0686bfcb=""> <div class="author clear" v-link="{name:\'user\',params:{username:re.author.loginname}}" _v-0686bfcb=""> <img :src=re.author.avatar_url _v-0686bfcb=""> <span class=name _v-0686bfcb="">{{re.author.loginname}}</span> <span class=create_at _v-0686bfcb="">{{$index}}楼&nbsp;&nbsp;&nbsp;{{re.create_at|last_reply_at}}</span> </div> <div class=content v-html=re.content|replaceLink _v-0686bfcb=""> </div> <div class="ups clear" v-if=loginStatus _v-0686bfcb=""> <div @click=ups(re.id,re.ups) _v-0686bfcb="">{{upsText(re)}}({{re.ups.length}})</div> <div @click=showReply(re.id,re.author.loginname) _v-0686bfcb="">回复</div> </div> <div class=myReply v-if="re.id===showReplyId" _v-0686bfcb=""> <textarea name=myReply class=myReplyText rows=3 required="" v-model=myReReply id=reReply @click=iosScrollTo _v-0686bfcb="">@{{showReplyName}}  </textarea> <mt-button type=default size=small @click=reReply(re.id) _v-0686bfcb="">回复该楼</mt-button> </div> </div> </div> <div class=myReply v-if=loginStatus _v-0686bfcb=""> <textarea name=myReply class=myReplyText rows=5 id=replyAuthor placeholder=快来回复楼主吧！ required="" v-model=myReply @click=iosScrollTo _v-0686bfcb=""></textarea> <mt-button type=primary size=large @click=reply _v-0686bfcb="">发表</mt-button> </div> </div> </div> '},64:function(e,t,o){var n,i;o(41),n=o(15),i=o(54),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)}});
//# sourceMappingURL=1.f2caa6ed9996d1929e16.js.map