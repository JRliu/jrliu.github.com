webpackJsonp([6,5],[function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=o(2),a=n(i),s=o(63),c=n(s),r=o(8),u=(n(r),o(73)),d=n(u),l=o(9),p=(n(l),o(1));o(35),a["default"].use(p.Lazyload),o(51),o(11),o(10),o(12),o(50),a["default"].use(d["default"]);var f=new d["default"]({hashbang:!0});f.map({"/:tab":{name:"tab",component:function(t){!function(){var e=[o(7)];t.apply(null,e)}.call(this)},subRoutes:{"/:page":{name:"page",component:function(t){!function(){var e=[o(7)];t.apply(null,e)}.call(this)}}}},"/topic/:id":{name:"topic",component:function(t){o.e(1,function(e){var o=[e(64)];t.apply(null,o)}.bind(this))}},"/topic/create":{component:function(t){o.e(4,function(e){var o=[e(65)];t.apply(null,o)}.bind(this))}},"/user/:username":{name:"user",component:function(t){o.e(2,function(e){var o=[e(72)];t.apply(null,o)}.bind(this))}},"/loginIn":{name:"loginIn",component:function(t){o.e(0,function(e){var o=[e(68)];t.apply(null,o)}.bind(this))}},"/message":{name:"message",component:function(t){o.e(3,function(e){var o=[e(70)];t.apply(null,o)}.bind(this))}}}),f.redirect({"*":"/all"}),f.alias({}),f.start(c["default"],"#app")},,,,,function(t,e){},function(t,e){},function(t,e,o){var n,i;o(43),n=o(23),i=o(56),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},,,function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=o(2),a=n(i);a["default"].filter("tabName",function(t){return 1==t.good?"精华":1==t.top?"置顶":"share"==t.tab?"分享":"ask"==t.tab?"提问":"job"==t.tab?"招聘":void 0}),a["default"].filter("last_reply_at",function(t){var e=new Date(t);e=e.getTime();var o=new Date;o=o.getTime();var n=o-e,i=6e4,a=60*i,s=24*a,c=30*s,r=12*c,u=n/i,d=n/a,l=n/s,p=n/c,f=n/r;return f>=1?parseInt(f)+"年前":p>=1?parseInt(p)+"个月前":l>=1?parseInt(l)+"天前":d>=1?parseInt(d)+"小时前":u>=1?parseInt(u)+"分钟前":"刚刚"}),a["default"].filter("replaceLink",function(t){return t.replace(/<a.+?>[^@]*(@)([\w\-]+?)\s*<\/a>/gi,'<a href="#!/user/$2">$1$2</a>')})},function(t,e){"use strict";!function(t){function e(){var t=n.getBoundingClientRect().width;t>640&&(t=640);var e=t/6.4;n.style.fontSize=e+"px"}var o=t.document,n=o.documentElement;t.addEventListener("resize",function(){e()},!1),t.addEventListener("pageshow",function(t){t.persisted&&e()},!1),e()}(window)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=o(2),a=n(i),s=o(8),c=n(s),r=o(1);o(34),a["default"].use(c["default"]),a["default"].http.interceptors.push(function(t,e){r.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),e(function(t){r.Indicator.close()})})},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=n(i),s=o(9),c=n(s);a["default"].use(c["default"]),e["default"]=new c["default"].Store({state:{topics:"",page:1,showSidebar:!1,refreshTopics:!1,loginStatus:localStorage.getItem("auto-login")||!1,userData:JSON.parse(localStorage.getItem("userData"))||"",accessToken:localStorage.getItem("accessToken")||""},mutations:{SAVE_TOPICS:function(t,e){t.topics=e,t.page=1,t.page++},MORE_TOPICS:function(t,e){t.page++,t.topics=t.topics.concat(e)},SHOW_SIDEBAR:function(t){t.showSidebar=!0,document.body.style.overflow="hidden"},HIDE_SIDEBAR:function(t){t.showSidebar=!1,document.body.style.overflow="auto"},CLEAR_TOPICS:function(t){t.topics=""},REFRESH_END:function(t){t.refreshTopics=!1},REFRESH_START:function(t){t.refreshTopics=!0},LOGIN_IN:function(t,e){t.loginStatus=!0,t.userData=e},LOGIN_OUT:function(t,e){t.loginStatus=!1}}})},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=(n(i),o(13)),s=n(a),c=o(67),r=n(c),u=o(7),d=n(u),l=o(66),p=n(l),f=o(71),v=n(f),m=o(69),h=n(m);e["default"]={components:{VueHeader:r["default"],Topics:d["default"],GoTop:p["default"],Sidebar:v["default"],Mask:h["default"]},vuex:{getters:{showSidebar:function(t){return t.showSidebar}}},store:s["default"]}},,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){return{show:!1,onscroll:!1,opacity:this.staticOpacity}},props:{scrollTo:{type:Number,"default":0},screenNum:{type:Number,"default":4},step:{type:Number,"default":30},scrollOpacity:{type:Number,"default":0},staticOpacity:{type:Number,"default":.8},top:{type:String},right:{type:String,"default":"0px"},bottom:{type:String,"default":"50px"},left:{type:String}},ready:function(){var t=this,e=function(){t.opacity=t.scrollOpacity;var e=document.documentElement.scrollTop||document.body.scrollTop,o=function(){(document.body.scrollTop||document.documentElement.scrollTop==e)&&(t.opacity=t.staticOpacity)};setTimeout(o,100),document.documentElement.scrollTop||document.body.scrollTop>window.screen.height*t.screenNum?t.show=!0:t.show=!1};window.addEventListener("touchstart",function(t){window.addEventListener("touchmove",function(t){e()})}),window.onscroll=function(){e()}},methods:{scroll_To:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=this;setTimeout(function(){var o=document.body.scrollTop||document.documentElement.scrollTop,n=e.step;if(t>o){var i=Math.ceil((t-o)/n),a=o+i;a<t?(window.scrollTo(0,a),scroll_To(t)):window.scrollTo(0,t)}else{var i=Math.floor((t-o)/n),a=o+i;a>t?(window.scrollTo(0,a),e.scroll_To(t)):window.scrollTo(0,t)}},1)})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={methods:{create:function(){}},vuex:{actions:{showSidebar:function(t){var e=t.dispatch;e("SHOW_SIDEBAR")}},getters:{loginStatus:function(t){return t.loginStatus}}}}},,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={vuex:{actions:{hideSidebar:function(t){var e=t.dispatch;e("HIDE_SIDEBAR")}}}}},,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1);o(5),o(6),o(37),e["default"]={components:{MtButton:n.Button},data:function(){return{btns:[{name:"首页",link:"/all",en:"all"},{name:"精华",link:"/good",en:"good"},{name:"分享",link:"/share",en:"share"},{name:"问答",link:"/ask",en:"ask"},{name:"招聘",link:"/job",en:"job"}]}},methods:{goList:function(t){this.clearTopics(),t.en==this.$route.params.tab&&this.refreshTopics(),this.hideSidebar()},logout:function(){var t=this;n.MessageBox.confirm("退出登陆？","提示").then(function(e){localStorage.clear(),t.logoutStatus(),(0,n.Toast)({message:"退出成功",duration:1e3,position:"bottom"})},function(t){(0,n.Toast)({message:"取消",duration:1e3,position:"bottom"})})},goMessage:function(){this.hideSidebar(),this.$route.router.go({name:"message"})}},vuex:{actions:{hideSidebar:function(t){var e=t.dispatch;window.setTimeout(function(){e("HIDE_SIDEBAR")},0)},clearTopics:function(t){var e=t.dispatch;e("CLEAR_TOPICS")},refreshTopics:function(t){var e=t.dispatch;e("REFRESH_START")},logoutStatus:function(t){var e=t.dispatch;e("LOGIN_OUT")}},getters:{loginStatus:function(t){return t.loginStatus},userData:function(t){return t.userData}}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1);o(36),e["default"]={components:{MtLoadmore:n.Loadmore},data:function(){return{tabs:[{cn:"全部",en:"all"},{cn:"精华",en:"good"},{cn:"分享",en:"share"},{cn:"提问",en:"ask"},{cn:"招聘",en:"job"}]}},computed:{tabName:function(){return this.$route.params.tab}},watch:{tabName:function(t,e){var o=this;setTimeout(function(){o.getTopics()},0)},refreshSwitch:function(t,e){0==e&&(this.refresh(),this.refreshEnd())}},ready:function(){""==this.topics&&this.getTopics()},methods:{get:function(t,e,o){this.$http({method:"GET",url:"https://cnodejs.org/api/v1/topics",params:{tab:this.$route.params.tab,page:t}}).then(function(t){e(t)})["catch"](function(t){o(t)})},getTopics:function(){var t=this,e=1,o=function(e){t.saveTopics(e.body.data)},n=function(t){console.warn(t)};this.get(e,o,n)},loadMore:function(t){var e=this,o=this.page,n=function(o){setTimeout(function(){e.moreTopics(o.body.data),e.$broadcast("onBottomLoaded",t)},300)},i=function(t){console.warn(t)};this.get(o,n,i)},refresh:function(t){var e=this,o=1,n=function(o){setTimeout(function(){e.saveTopics(o.body.data),e.$broadcast("onTopLoaded",t)},300)},i=function(t){console.warn(t)};this.get(o,n,i)}},vuex:{getters:{topics:function(t){return t.topics},page:function(t){return t.page},refreshSwitch:function(t){return t.refreshTopics}},actions:{saveTopics:function(t,e){var o=t.dispatch;o("SAVE_TOPICS",e)},moreTopics:function(t,e){var o=t.dispatch;o("MORE_TOPICS",e)},refreshEnd:function(t){var e=t.dispatch;e("REFRESH_END")}}},route:{data:function(t){"topic"==t.from.name&&this.$nextTick(function(){return document.body.scrollTop=sessionStorage.scrollTop})},deactivate:function(t){"topic"==t.to.name&&(sessionStorage.scrollTop=document.body.scrollTop),t.next()}}}},,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e){},function(t,e){},,,function(t,e){},,function(t,e){},function(t,e){},,function(t,e){},,function(t,e){},function(t,e){},function(t,e){t.exports=" <div id=app> <vue-header></vue-header> <div class=space></div> <router-view></router-view> <go-top :bottom='\".3rem\"' :right='\"0\"' :screen-num=1.7></go-top> <sidebar v-show=showSidebar transition=sidebar> </sidebar> <mask v-show=showSidebar></mask> </div> "},function(t,e){t.exports=' <div id=sidebar _v-053d6d2e=""> <div class=loginIn v-link="{name:\'loginIn\'}" @click=hideSidebar v-if=!loginStatus _v-053d6d2e=""> <div class=img _v-053d6d2e=""> <i class="iconfont icon-denglu" _v-053d6d2e=""></i> </div> <mt-button type=default :size=&quot;small&quot; class=logBtn _v-053d6d2e=""> 登陆 </mt-button> </div> <div class=loginIn v-if=loginStatus _v-053d6d2e=""> <div class=img v-link="{name:\'user\',params:{username:userData.loginname}}" @click=hideSidebar _v-053d6d2e=""> <img :src=userData.avatar_url _v-053d6d2e=""> </div> <p _v-053d6d2e="">{{userData.loginname}}</p> <mt-button type=danger :size=&quot;small&quot; class=logBtn @click=logout _v-053d6d2e=""> 退出登陆 </mt-button> <i class="iconfont icon-xiaoxi" @click=goMessage _v-053d6d2e=""></i> </div> <div class=btns _v-053d6d2e=""> <div class=btn v-for="btn in btns" v-link={path:btn.link} @click=goList(btn) _v-053d6d2e=""> {{btn.name}} </div> </div> </div> '},,,function(t,e){t.exports=' <div id=topics _v-2b0d0d42=""> <mt-loadmore :bottom-method=loadMore :top-method=refresh :bottom-pull-text="\'上拉加载更多\'" _v-2b0d0d42=""> <div id=tab class=clear _v-2b0d0d42=""> <div v-for="tab in tabs" _v-2b0d0d42=""> <p class=tab v-link={name:&quot;tab&quot;,params:{tab:tab.en},activeClass:&quot;active&quot;} _v-2b0d0d42="">{{tab.cn}} </p> </div> </div> <div class=topic v-for="topic in topics" _v-2b0d0d42=""> <img v-lazy=topic.author.avatar_url v-link="{name:\'user\',params:{username:topic.author.loginname}}" _v-2b0d0d42=""> <div class=tab v-bind:class="{\'good\':topic.good||topic.top}" _v-2b0d0d42=""> {{topic|tabName}} </div> <div class=title v-link="{name:\'topic\',params:{id:topic.id}}" _v-2b0d0d42=""> {{topic.title}} </div> <div class=last_reply_at _v-2b0d0d42="">{{topic.last_reply_at|last_reply_at}}</div> <div class=reply_visit _v-2b0d0d42="">{{topic.reply_count}}/{{topic.visit_count}}</div> </div> </mt-loadmore> </div> '},,function(t,e){t.exports=' <div id=mask @click=hideSidebar _v-40a4408a=""> </div> '},function(t,e){t.exports=' <div id=gotop _v-47d4a33f=""> <div class=btn v-show=show :style={opacity:opacity,top:top,right:right,bottom:bottom,left:left} @click=scroll_To(scrollTo) _v-47d4a33f=""> <i class="iconfont icon-huidingbu" _v-47d4a33f=""></i> </div> </div> '},,function(t,e){t.exports=' <div id=header _v-5ccb8baa=""> <i class="iconfont icon-meun" @click=showSidebar _v-5ccb8baa=""></i> <img src=https://cnodejs.org/public/images/cnodejs_light.svg alt="" class=logo _v-5ccb8baa=""> <span v-if=loginStatus @click=create v-link={path:&quot;/topic/create&quot;} _v-5ccb8baa="">+</span> </div> '},,function(t,e,o){var n,i;o(39),n=o(14),i=o(52),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},,,function(t,e,o){var n,i;o(46),n=o(17),i=o(59),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},function(t,e,o){var n,i;o(48),n=o(18),i=o(61),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},,function(t,e,o){var n,i;o(45),n=o(20),i=o(58),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},,function(t,e,o){var n,i;o(40),n=o(22),i=o(53),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)}]);
//# sourceMappingURL=app.7489b4c54907c698e919.js.map